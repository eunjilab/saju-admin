<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¶”ê°€ì§ˆë¬¸ ê²°ê³¼ ìƒì„±ê¸° | ìš´ëª…ì„ ë“£ë‹¤</title>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&family=Nanum+Myeongjo:wght@400;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Nanum Gothic', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e0e0e0;
            line-height: 1.7;
        }
        
        .container { max-width: 1400px; margin: 0 auto; padding: 30px 20px; }
        
        .header { text-align: center; margin-bottom: 30px; }
        .header .step-badge { display: inline-block; background: rgba(212, 175, 130, 0.2); border: 1px solid #d4af82; padding: 5px 15px; border-radius: 20px; font-size: 12px; color: #d4af82; margin-bottom: 10px; }
        .header h1 { font-size: 28px; color: #d4af82; margin-bottom: 8px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .header p { color: #888; font-size: 14px; }
        .version-badge { display: inline-block; background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: #fff; font-size: 11px; font-weight: bold; padding: 3px 10px; border-radius: 12px; }
        
        .main-layout { display: grid; grid-template-columns: 450px 1fr; gap: 30px; }
        @media (max-width: 1100px) { .main-layout { grid-template-columns: 1fr; } }
        
        .input-section { background: linear-gradient(135deg, rgba(212, 175, 130, 0.1) 0%, rgba(212, 175, 130, 0.05) 100%); border: 2px solid #d4af82; border-radius: 16px; padding: 25px; }
        .input-section h3 { font-size: 16px; color: #d4af82; margin-bottom: 15px; display: flex; align-items: center; gap: 8px; }
        .input-section p.hint { font-size: 13px; color: #aaa; margin-bottom: 15px; line-height: 1.7; }
        .hint-box { background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 8px; padding: 12px; margin-bottom: 15px; }
        .hint-box code { background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px; font-size: 11px; color: #a78bfa; }
        .input-textarea { width: 100%; height: 500px; background: #1a1a2e; border: 1px solid #444; border-radius: 8px; color: #e0e0e0; padding: 15px; font-size: 12px; font-family: monospace; resize: vertical; line-height: 1.6; }
        .input-textarea:focus { outline: none; border-color: #d4af82; }
        
        .meta-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .meta-input { width: 100%; padding: 10px 12px; background: #1a1a2e; border: 1px solid #444; border-radius: 8px; color: #e0e0e0; font-size: 13px; }
        .meta-input:focus { outline: none; border-color: #d4af82; }
        .meta-input::placeholder { color: #666; }
        .meta-textarea { width: 100%; height: 80px; background: #1a1a2e; border: 1px solid #444; border-radius: 8px; color: #e0e0e0; padding: 12px; font-size: 13px; font-family: 'Nanum Gothic', sans-serif; resize: none; line-height: 1.6; margin-bottom: 15px; }
        .meta-textarea:focus { outline: none; border-color: #d4af82; }
        .meta-textarea::placeholder { color: #666; }
        
        .btn-row { display: flex; gap: 10px; margin-top: 15px; }
        .btn { flex: 1; padding: 14px; border: none; border-radius: 8px; font-size: 14px; font-weight: bold; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(135deg, #d4af82 0%, #b8956a 100%); color: #1a1a2e; }
        .btn-secondary { background: rgba(255, 255, 255, 0.1); color: #e0e0e0; border: 1px solid #444; }
        .btn:hover { transform: translateY(-2px); }
        
        .parse-result { margin-top: 15px; padding: 15px; background: rgba(0, 0, 0, 0.3); border-radius: 10px; font-size: 12px; display: none; }
        .parse-result.show { display: block; }
        .parse-result.success { border-left: 4px solid #4ade80; }
        .parse-result.error { border-left: 4px solid #ef4444; }
        .question-list { margin-top: 10px; }
        .question-item { display: flex; align-items: center; gap: 8px; padding: 8px 10px; background: rgba(255,255,255,0.03); border-radius: 6px; margin-bottom: 6px; }
        .question-item .num { width: 22px; height: 22px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: bold; }
        .question-item .text { flex: 1; font-size: 12px; color: #ccc; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        
        .preview-panel { background: #fff; border-radius: 16px; overflow: hidden; }
        .preview-header { background: linear-gradient(135deg, #1a1a2e 0%, #2d2d4a 100%); padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 10; }
        .preview-header h2 { font-size: 14px; color: #d4af82; }
        .btn-download { padding: 10px 20px; border: none; border-radius: 6px; font-size: 13px; cursor: pointer; font-weight: bold; background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%); color: #fff; transition: all 0.3s; }
        .btn-download:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(74, 222, 128, 0.3); }
        .preview-content { max-height: calc(100vh - 180px); overflow-y: auto; }
        .empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 500px; color: #888; background: #f8f6f1; }
        .empty-state .icon { font-size: 64px; margin-bottom: 20px; opacity: 0.3; }
    </style>
    
    <!-- ê²°ê³¼ì§€ ìŠ¤íƒ€ì¼ -->
    <style id="resultStyles">
        .result-container {
            font-family: 'Nanum Myeongjo', serif;
            background: #fffef9;
            color: #2d2418;
            line-height: 2.0;
            word-break: keep-all;
            padding-bottom: 40px;
            background-image: radial-gradient(circle at 20% 50%, rgba(212,175,130,0.03) 0%, transparent 50%),
                              radial-gradient(circle at 80% 20%, rgba(212,175,130,0.03) 0%, transparent 40%);
        }
        :root {
            --gold: #d4af82;
            --gold-dark: #b8956a;
            --gold-light: #e8d4b8;
            --navy: #3d4a6b;
            --navy-light: #4d5a7b;
            --purple: #7c3aed;
            --purple-light: #a78bfa;
        }
        
        /* í—¤ë” - í”„ë¦¬ë¯¸ì—„ ì»¤ë²„ ìŠ¤íƒ€ì¼ */
        .qa-header {
            background: linear-gradient(175deg, #1a1612 0%, #2d2418 40%, #3d3225 100%);
            color: #e8dcc8;
            text-align: center;
            padding: 50px 25px 45px;
            position: relative;
        }
        .qa-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: radial-gradient(circle at 15% 20%, rgba(212,175,130,0.06) 0%, transparent 30%),
                              radial-gradient(circle at 85% 30%, rgba(212,175,130,0.06) 0%, transparent 30%),
                              radial-gradient(circle at 50% 80%, rgba(212,175,130,0.04) 0%, transparent 40%);
            pointer-events: none;
        }
        .qa-header .top-line {
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #a89068, transparent);
            margin: 0 auto 20px;
        }
        .qa-header .brand {
            font-size: 11px;
            letter-spacing: 6px;
            color: #a89068;
            margin-bottom: 15px;
        }
        .qa-header .icon-circle {
            width: 70px;
            height: 70px;
            margin: 0 auto 20px;
            border: 2px solid rgba(168, 144, 104, 0.4);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            position: relative;
        }
        .qa-header .icon-circle::after {
            content: '';
            position: absolute;
            top: -8px; left: -8px; right: -8px; bottom: -8px;
            border: 1px solid rgba(168, 144, 104, 0.2);
            border-radius: 50%;
        }
        .qa-header h1 {
            font-size: 28px;
            font-weight: 800;
            letter-spacing: 10px;
            color: #f5efe3;
            margin-bottom: 8px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        .qa-header .subtitle {
            font-size: 12px;
            color: #a89068;
            letter-spacing: 4px;
            margin-bottom: 25px;
        }
        .qa-header .divider {
            width: 120px;
            height: 1px;
            background: linear-gradient(90deg, transparent, #a89068, transparent);
            margin: 0 auto 25px;
        }
        .qa-header .user-section {
            position: relative;
            z-index: 1;
        }
        .qa-header .pkg-badge {
            font-size: 10px;
            letter-spacing: 3px;
            color: var(--gold);
            background: rgba(212, 175, 130, 0.15);
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 15px;
            border: 1px solid rgba(212, 175, 130, 0.3);
        }
        .qa-header .user-name {
            font-size: 32px;
            font-weight: 700;
            color: #f5efe3;
            margin-bottom: 12px;
        }
        .qa-header .user-birth {
            font-size: 14px;
            color: #c4b5a0;
            margin-bottom: 8px;
        }
        .qa-header .user-ilju {
            font-size: 22px;
            letter-spacing: 8px;
            color: var(--gold);
            font-weight: 700;
            margin-bottom: 20px;
        }
        .qa-header .count-badge {
            display: inline-block;
            background: rgba(212, 175, 130, 0.2);
            border: 1px solid rgba(212, 175, 130, 0.4);
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 13px;
            color: var(--gold);
        }
        
        /* ì§ˆë¬¸ ì¹´ë“œ */
        .question-card {
            margin: 30px 20px;
            background: #fffef9;
            border: 1px solid #e5dccb;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(139,115,85,0.1);
        }
        .question-card-header {
            background: linear-gradient(135deg, var(--navy) 0%, var(--navy-light) 100%);
            padding: 20px 25px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .question-number {
            width: 40px;
            height: 40px;
            background: rgba(212, 175, 130, 0.2);
            border: 2px solid var(--gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 800;
            color: var(--gold);
        }
        .question-title {
            flex: 1;
            font-size: 16px;
            font-weight: 700;
            color: #fff;
            line-height: 1.6;
        }
        .question-card-body { padding: 0; }
        
        /* í•´ì„ ì„¹ì…˜ */
        .interpretation-section {
            padding: 25px;
            border-bottom: 1px solid #f0ebe0;
        }
        .interpretation-section:last-child { border-bottom: none; }
        .interpretation-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 18px;
        }
        .interpretation-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }
        .interpretation-icon.myeongri { background: linear-gradient(135deg, #fef3c7, #fde68a); }
        .interpretation-icon.juyeok { background: linear-gradient(135deg, #e0e7ff, #c7d2fe); }
        .interpretation-icon.taegil { background: linear-gradient(135deg, #dcfce7, #bbf7d0); }
        .interpretation-icon.pungsu { background: linear-gradient(135deg, #fed7aa, #fdba74); }
        .interpretation-icon.gunghap { background: linear-gradient(135deg, #fce7f3, #f9a8d4); }
        .interpretation-icon.advice { background: linear-gradient(135deg, #fce7f3, #fbcfe8); }
        .interpretation-title {
            font-size: 15px;
            font-weight: 700;
            color: var(--navy);
        }
        .interpretation-content {
            font-size: 15px;
            line-height: 2.2;
            color: #4a3d30;
        }
        .interpretation-content p { margin-bottom: 12px; }
        .interpretation-content strong { color: #3d3225; }
        
        /* í•µì‹¬ ì¡°ì–¸ ë°•ìŠ¤ */
        .advice-box {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border: 1px solid #fcd34d;
            border-radius: 12px;
            padding: 20px;
            margin: 25px;
        }
        .advice-box-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }
        .advice-box-header .icon { font-size: 20px; }
        .advice-box-header .title {
            font-size: 14px;
            font-weight: 700;
            color: #92400e;
        }
        .advice-box-content {
            font-size: 15px;
            line-height: 2.0;
            color: #78350f;
        }
        
        /* í‘¸í„° */
        .qa-footer {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(180deg, #f8f6f1 0%, #f0ebe0 100%);
        }
        .qa-footer .divider {
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
            margin: 0 auto 20px;
        }
        .qa-footer .brand {
            font-size: 12px;
            letter-spacing: 4px;
            color: #a89068;
            margin-bottom: 8px;
        }
        .qa-footer .message {
            font-size: 14px;
            color: #6b5a30;
            line-height: 1.8;
        }
        .qa-footer .channel-box {
            margin-top: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border: 1px solid #fcd34d;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .qa-footer .channel-box:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(252, 211, 77, 0.4);
            border-color: #f59e0b;
        }
        .qa-footer .channel-box .icon { font-size: 24px; margin-bottom: 8px; }
        .qa-footer .channel-box .title {
            font-size: 14px;
            font-weight: 700;
            color: #92400e;
            margin-bottom: 6px;
        }
        .qa-footer .channel-box .desc {
            font-size: 13px;
            color: #78350f;
            line-height: 1.7;
        }
        .qa-footer .consultation-box {
            margin-top: 25px;
            padding: 25px;
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border: 1px solid #c4b5fd;
            border-radius: 12px;
            text-align: left;
        }
        .qa-footer .consultation-box .consult-title {
            font-size: 16px;
            font-weight: 700;
            color: #5b21b6;
            margin-bottom: 15px;
            text-align: center;
        }
        .qa-footer .consultation-box .consult-desc {
            font-size: 14px;
            color: #6b21a8;
            line-height: 2.0;
            text-align: center;
            margin-bottom: 18px;
        }
        .qa-footer .consultation-box .consult-cta {
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
            color: #fff;
            padding: 15px 20px;
            border-radius: 10px;
            text-align: center;
        }
        .qa-footer .consultation-box .consult-cta .cta-title {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 6px;
        }
        .qa-footer .consultation-box .consult-cta .cta-price {
            font-size: 13px;
            margin-bottom: 8px;
        }
        .qa-footer .consultation-box .consult-cta .cta-price .original {
            text-decoration: line-through;
            opacity: 0.7;
        }
        .qa-footer .consultation-box .consult-cta .cta-price .discount {
            font-weight: 700;
            color: #fde68a;
        }
        .qa-footer .consultation-box .consult-cta .cta-action {
            font-size: 12px;
            opacity: 0.9;
        }
        
        /* ì¸íŠ¸ë¡œ ì„¤ëª… ë°•ìŠ¤ */
        .intro-box {
            margin: 30px 20px;
            padding: 25px;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 1px solid #7dd3fc;
            border-radius: 16px;
            text-align: center;
        }
        .intro-box .intro-icon { font-size: 32px; margin-bottom: 12px; }
        .intro-box .intro-title {
            font-size: 16px;
            font-weight: 700;
            color: #0369a1;
            margin-bottom: 12px;
        }
        .intro-box .intro-desc {
            font-size: 14px;
            color: #0c4a6e;
            line-height: 2.0;
        }
        
        /* ì¢…í•© ìš”ì•½ ì„¹ì…˜ */
        .summary-section {
            margin: 35px 20px;
            background: linear-gradient(135deg, #3d3225 0%, #2a2115 100%);
            border-radius: 20px;
            padding: 30px 25px;
            color: #e8dcc8;
            border: 2px solid var(--gold);
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }
        .summary-section .section-title {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }
        .summary-section .section-title .icon { font-size: 24px; }
        .summary-section .section-title h3 {
            font-size: 18px;
            font-weight: 700;
            color: #f5efe3;
            letter-spacing: 2px;
        }
        .summary-section .summary-content {
            font-size: 15px;
            line-height: 2.2;
            color: #f0e8da;
        }
        .summary-section .summary-content strong { color: var(--gold); }
        
        /* Claude ì¶œë ¥ HTML í´ë˜ìŠ¤ ìŠ¤íƒ€ì¼ - ì „ì²´ ì¢…í•© */
        .final-summary {
            margin: 35px 20px;
            background: linear-gradient(135deg, #2d2418 0%, #1a1612 100%);
            border-radius: 20px;
            padding: 35px 28px;
            color: #e8dcc8;
            border: 2px solid var(--gold);
            box-shadow: 0 10px 40px rgba(0,0,0,0.25);
            position: relative;
            overflow: hidden;
        }
        .final-summary::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--gold-dark), var(--gold), var(--gold-dark));
        }
        .final-summary .summary-title {
            font-size: 22px;
            font-weight: 700;
            color: #f5efe3;
            margin-bottom: 25px;
            letter-spacing: 3px;
            text-align: center;
            padding-bottom: 18px;
            border-bottom: 1px solid rgba(212, 175, 130, 0.3);
        }
        .final-summary .summary-content {
            font-size: 15px;
            line-height: 2.4;
            color: #f0e8da;
            white-space: pre-line;
        }
        .final-summary .summary-content strong {
            color: var(--gold);
            font-weight: 700;
        }
        .final-summary .summary-content em {
            color: var(--gold-light);
            font-style: italic;
        }
        .final-summary .summary-content br {
            display: block;
            content: '';
            margin-top: 8px;
        }
        .final-summary .luck-point {
            margin-top: 30px;
            padding: 20px 22px;
            background: rgba(212, 175, 130, 0.12);
            border: 1px solid rgba(212, 175, 130, 0.35);
            border-radius: 14px;
            display: flex;
            align-items: center;
            gap: 14px;
            font-size: 15px;
            color: var(--gold);
            font-weight: 600;
        }
        .final-summary .luck-point .luck-icon {
            font-size: 24px;
        }
        .final-summary .luck-point {
            margin-top: 25px;
            padding: 18px 20px;
            background: rgba(212, 175, 130, 0.15);
            border: 1px solid rgba(212, 175, 130, 0.3);
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            color: var(--gold);
        }
        .final-summary .luck-point .luck-icon {
            font-size: 20px;
        }
        
        /* ì¶”ê°€ Claude ì¶œë ¥ í´ë˜ìŠ¤ë“¤ */
        .total-summary, .overall-summary {
            margin: 35px 20px;
            background: linear-gradient(135deg, #3d3225 0%, #2a2115 100%);
            border-radius: 20px;
            padding: 30px 25px;
            color: #e8dcc8;
            border: 2px solid var(--gold);
        }
        .summary-title, .total-title {
            font-size: 20px;
            font-weight: 700;
            color: #f5efe3;
            margin-bottom: 20px;
        }
        .key-point, .highlight-box {
            margin-top: 20px;
            padding: 15px;
            background: rgba(212, 175, 130, 0.1);
            border-left: 3px solid var(--gold);
            border-radius: 0 10px 10px 0;
        }
        .keyword-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        .keyword-item {
            background: rgba(212, 175, 130, 0.2);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            color: var(--gold);
        }
        
        /* í–‰ìš´ ì•„ì´í…œ ì„¹ì…˜ (ë…ë¦½í˜•) */
        .luck-point {
            margin: 25px 20px;
            padding: 18px 22px;
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border: 1px solid #fcd34d;
            border-radius: 14px;
            display: flex;
            align-items: center;
            gap: 14px;
            font-size: 15px;
            color: #92400e;
            font-weight: 600;
        }
        .luck-point .luck-icon {
            font-size: 24px;
        }
        
        .luck-items {
            margin: 25px 20px;
            padding: 25px;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 1px solid #86efac;
            border-radius: 16px;
        }
        .luck-items .luck-title {
            font-size: 17px;
            font-weight: 700;
            color: #166534;
            margin-bottom: 18px;
            text-align: center;
        }
        .luck-items .luck-content {
            font-size: 14px;
            line-height: 2.2;
            color: #15803d;
        }
        .luck-items .luck-content p {
            margin-bottom: 12px;
            padding: 10px 14px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 10px;
        }
        .luck-items .luck-content strong {
            color: #14532d;
        }
        
        /* ë§ˆí¬ë‹¤ìš´ ë³€í™˜ ìŠ¤íƒ€ì¼ */
        .interpretation-content ul {
            margin: 15px 0 15px 15px;
            list-style: none;
        }
        .interpretation-content li {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }
        .interpretation-content li::before {
            content: 'âœ¦';
            position: absolute;
            left: 0;
            color: var(--gold);
            font-size: 10px;
        }
        .interpretation-content blockquote {
            border-left: 3px solid var(--gold);
            padding-left: 15px;
            color: #6b5744;
            font-style: italic;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="step-badge">STEP 5 Â· ì¶”ê°€ ì§ˆë¬¸</div>
            <h1>ğŸ”® ì¶”ê°€ì§ˆë¬¸ ê²°ê³¼ ìƒì„±ê¸° <span class="version-badge">Premium</span></h1>
            <p>Claude ì¶œë ¥ë¬¼ì„ ë¶™ì—¬ë„£ìœ¼ë©´ ì˜ˆìœ ì¶”ê°€ì§ˆë¬¸ ë‹µë³€ ê²°ê³¼ì§€ê°€ ìƒì„±ë©ë‹ˆë‹¤</p>
        </div>
        
        <div class="main-layout">
            <div class="input-section">
                <h3>âœ¨ Claude ì¶œë ¥ ë¶™ì—¬ë„£ê¸°</h3>
                <div class="hint-box">
                    <p class="hint" style="margin:0;">
                        ğŸ’¡ <strong>ìµœëŒ€ 10ê°œ ì§ˆë¬¸</strong>ê¹Œì§€ í•œ ë²ˆì— ì²˜ë¦¬ ê°€ëŠ¥<br>
                        ê° ì§ˆë¬¸ì€ <code>&lt;div class="question-block"&gt;</code> ë˜ëŠ”<br>
                        <code>## ì§ˆë¬¸ N:</code> í˜•ì‹ìœ¼ë¡œ êµ¬ë¶„ë©ë‹ˆë‹¤
                    </p>
                </div>
                <textarea id="claudeInput" class="input-textarea" placeholder="Claudeê°€ ìƒì„±í•œ ì¶”ê°€ì§ˆë¬¸ ë‹µë³€ì„ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”...

ì˜ˆì‹œ í˜•ì‹:
<!-- â˜… ì§ˆë¬¸ 1 -->
<div class=&quot;question-block&quot;>
  <div class=&quot;question-title&quot;>â“ ì§ˆë¬¸ 1: ì´ì§ ì‹œê¸°ê°€ ì–¸ì œì¼ê¹Œìš”?</div>
  <div class=&quot;route-section&quot;>
    <div class=&quot;route-title&quot;>ğŸ’« ëª…ë¦¬ í•´ì„</div>
    <div class=&quot;route-content&quot;>í•´ì„ ë‚´ìš©...</div>
  </div>
  ...
</div>

ë˜ëŠ” ë§ˆí¬ë‹¤ìš´ í˜•ì‹:
## ì§ˆë¬¸ 1: ì´ì§ ì‹œê¸°ê°€ ì–¸ì œì¼ê¹Œìš”?

### ğŸ’« ëª…ë¦¬ í•´ì„
í•´ì„ ë‚´ìš©...

### ğŸ”® ì£¼ì—­ í•´ì„
í•´ì„ ë‚´ìš©...
"></textarea>
                
                <div class="btn-row">
                    <button class="btn btn-primary" onclick="generateResult()">âœ¨ ê²°ê³¼ì§€ ìƒì„±</button>
                    <button class="btn btn-secondary" onclick="clearInput()">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
                </div>
                
                <div id="parseResult" class="parse-result">
                    <div id="parseMessage"></div>
                    <div id="questionList" class="question-list"></div>
                </div>
            </div>
            
            <div class="preview-panel">
                <div class="preview-header">
                    <h2>ğŸ“„ ê²°ê³¼ì§€ ë¯¸ë¦¬ë³´ê¸°</h2>
                    <button class="btn-download" onclick="downloadHTML()">ğŸ“¥ HTML ë‹¤ìš´ë¡œë“œ</button>
                    <button class="btn-download" onclick="uploadToNetlify()" style="background:linear-gradient(135deg,#00ad9f,#008f82);">ğŸ”— ë§í¬ ìƒì„±</button>
                    <div id="upload-status" style="margin-left:10px;color:#00ad9f;font-size:13px;"></div>
                </div>
                <div class="preview-content" id="previewContent">
                    <div class="empty-state">
                        <div class="icon">ğŸ”®</div>
                        <p>Claude ì¶”ê°€ì§ˆë¬¸ ë‹µë³€ì„ ë¶™ì—¬ë„£ìœ¼ë©´<br>ê²°ê³¼ì§€ê°€ ìƒì„±ë©ë‹ˆë‹¤</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let parsedQuestions = [];
        let metaInfo = {};
        let summaryContent = '';
        let luckPointContent = '';
        let luckItemsContent = '';
        
        function parseLuckContent(input) {
            // luck-point íŒŒì‹±
            const luckPointMatch = input.match(/<div[^>]*class="luck-point"[^>]*>([\s\S]*?)<\/div>/i);
            if (luckPointMatch) {
                luckPointContent = luckPointMatch[0];
            }
            
            // luck-items íŒŒì‹± (ì¤‘ì²© div ì²˜ë¦¬)
            const luckItemsStart = input.indexOf('class="luck-items"');
            if (luckItemsStart !== -1) {
                let divStart = input.lastIndexOf('<div', luckItemsStart);
                if (divStart !== -1) {
                    let depth = 0;
                    let i = divStart;
                    let started = false;
                    while (i < input.length) {
                        if (input.substring(i, i + 4) === '<div') {
                            depth++;
                            started = true;
                        } else if (input.substring(i, i + 6) === '</div>') {
                            depth--;
                            if (started && depth === 0) {
                                luckItemsContent = input.substring(divStart, i + 6);
                                break;
                            }
                        }
                        i++;
                    }
                }
            }
        }
        
        function parseSummary(input) {
            // ë°©ë²• 1: final-summary í´ë˜ìŠ¤ ì „ì²´ ë¸”ë¡ ì°¾ê¸°
            const finalSummaryStart = input.indexOf('class="final-summary"');
            if (finalSummaryStart !== -1) {
                // ì‹œì‘ div íƒœê·¸ ì°¾ê¸°
                let divStart = input.lastIndexOf('<div', finalSummaryStart);
                if (divStart !== -1) {
                    // ì¤‘ì²©ëœ div ì¹´ìš´íŠ¸í•´ì„œ ë‹«ëŠ” íƒœê·¸ ì°¾ê¸°
                    let depth = 0;
                    let i = divStart;
                    let started = false;
                    while (i < input.length) {
                        if (input.substring(i, i + 4) === '<div') {
                            depth++;
                            started = true;
                        } else if (input.substring(i, i + 6) === '</div>') {
                            depth--;
                            if (started && depth === 0) {
                                return input.substring(divStart, i + 6);
                            }
                        }
                        i++;
                    }
                }
            }
            
            // ë°©ë²• 2: summary ê´€ë ¨ í´ë˜ìŠ¤ ì°¾ê¸° (ê°™ì€ ë¡œì§)
            const summaryStart = input.search(/class="(?:summary|total-summary|overall-summary)"/i);
            if (summaryStart !== -1) {
                let divStart = input.lastIndexOf('<div', summaryStart);
                if (divStart !== -1) {
                    let depth = 0;
                    let i = divStart;
                    let started = false;
                    while (i < input.length) {
                        if (input.substring(i, i + 4) === '<div') {
                            depth++;
                            started = true;
                        } else if (input.substring(i, i + 6) === '</div>') {
                            depth--;
                            if (started && depth === 0) {
                                return input.substring(divStart, i + 6);
                            }
                        }
                        i++;
                    }
                }
            }
            
            // ë°©ë²• 3: <!-- ì¢…í•© --> ì£¼ì„ í˜•ì‹
            const commentMatch = input.match(/<!--\s*(?:â˜…\s*)?(?:ì „ì²´\s*)?ì¢…í•©[^>]*-->([\s\S]*?)(?=<!--|<div[^>]*class="question|$)/i);
            if (commentMatch) {
                return commentMatch[1].trim();
            }
            
            // ë°©ë²• 4: ë§ˆí¬ë‹¤ìš´ í˜•ì‹
            const mdSummaryMatch = input.match(/##\s*(?:ì „ì²´\s*)?(?:ì¢…í•©|ìš”ì•½)[^\n]*\n([\s\S]*?)(?=##|$)/i);
            if (mdSummaryMatch) {
                return mdSummaryMatch[1].trim();
            }
            
            return '';
        }
        
        function parseMetaInfo(text) {
            const info = {};
            
            // ì£¼ë¬¸ì½”ë“œ íŒŒì‹±
            const orderCodeMatch = text.match(/ì£¼ë¬¸ì½”ë“œ\s*[:ï¼š]\s*([^\n\r]+?)(?=\s*ì´ë¦„|\s*$)/i);
            if (orderCodeMatch) info.orderCode = orderCodeMatch[1].trim();
            
            // ì´ë¦„ íŒŒì‹±
            const nameMatch = text.match(/ì´ë¦„\s*[:ï¼š]\s*([^\n\r]+?)(?=\s*ìƒë…„ì›”ì¼|\s*ì¼ì£¼|$)/i);
            if (nameMatch) info.name = nameMatch[1].trim();
            
            // ìƒë…„ì›”ì¼ íŒŒì‹±
            const birthMatch = text.match(/ìƒë…„ì›”ì¼\s*[:ï¼š]\s*([^\n\r]+?)(?=\s*ì¼ì£¼|$)/i);
            if (birthMatch) {
                const birthText = birthMatch[1].trim();
                info.birthFull = birthText;
                
                // ì—°ì›”ì¼ ì¶”ì¶œ
                const dateMatch = birthText.match(/(\d{4})ë…„\s*(\d{1,2})ì›”\s*(\d{1,2})ì¼/);
                if (dateMatch) {
                    info.year = dateMatch[1];
                    info.month = dateMatch[2];
                    info.day = dateMatch[3];
                }
                
                // ì‹œê°„ ì¶”ì¶œ
                const timeMatch = birthText.match(/(\d{1,2})ì‹œ\s*(\d{1,2})ë¶„/);
                if (timeMatch) {
                    info.hour = timeMatch[1];
                    info.minute = timeMatch[2];
                }
                
                // ì–‘ë ¥/ìŒë ¥
                if (birthText.includes('ìŒë ¥')) info.calendar = 'ìŒë ¥';
                else if (birthText.includes('ì–‘ë ¥')) info.calendar = 'ì–‘ë ¥';
                
                // ì„±ë³„
                if (birthText.includes('ì—¬ì') || birthText.includes('ì—¬')) info.gender = 'ì—¬';
                else if (birthText.includes('ë‚¨ì') || birthText.includes('ë‚¨')) info.gender = 'ë‚¨';
            }
            
            // ì¼ì£¼ íŒŒì‹±
            const iljuMatch = text.match(/ì¼ì£¼\s*[:ï¼š]\s*([ç”²ä¹™ä¸™ä¸æˆŠå·±åºšè¾›å£¬ç™¸][å­ä¸‘å¯…å¯è¾°å·³åˆæœªç”³é…‰æˆŒäº¥])/);
            if (iljuMatch) info.ilju = iljuMatch[1];
            
            // Claude ì¶œë ¥ì—ì„œ ì¼ì£¼ ì¶”ì¶œ ì‹œë„ (ì—†ìœ¼ë©´)
            if (!info.ilju) {
                const claudeIljuMatch = document.getElementById('claudeInput').value.match(/([ç”²ä¹™ä¸™ä¸æˆŠå·±åºšè¾›å£¬ç™¸][å­ä¸‘å¯…å¯è¾°å·³åˆæœªç”³é…‰æˆŒäº¥])ì¼ì£¼/);
                if (claudeIljuMatch) info.ilju = claudeIljuMatch[1];
            }
            
            return info;
        }
        
        function generateResult() {
            const input = document.getElementById('claudeInput').value.trim();
            
            if (!input) {
                showParseResult('error', 'âŒ Claude ì¶œë ¥ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ë©”íƒ€ ì •ë³´ íŒŒì‹± (Claude ì¶œë ¥ì—ì„œ ì¶”ì¶œ)
            metaInfo = parseMetaInfo(input);
            
            // ì§ˆë¬¸ íŒŒì‹±
            parsedQuestions = parseQuestions(input);
            
            if (parsedQuestions.length === 0) {
                showParseResult('error', 'âŒ ì§ˆë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜•ì‹ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ì§ˆë¬¸ ë²ˆí˜¸ ìˆœì„œëŒ€ë¡œ ì¬ì •ë ¬ (1, 2, 3...)
            parsedQuestions = parsedQuestions.map((q, idx) => ({
                ...q,
                num: idx + 1
            }));
            
            // íŒŒì‹± ê²°ê³¼ í‘œì‹œ
            let listHTML = '';
            parsedQuestions.forEach((q, i) => {
                listHTML += `<div class="question-item">
                    <span class="num">${i + 1}</span>
                    <span class="text">${escapeHTML(q.title)}</span>
                </div>`;
            });
            
            const metaSummary = metaInfo.name ? ` (${metaInfo.name}ë‹˜)` : '';
            showParseResult('success', `âœ… ${parsedQuestions.length}ê°œì˜ ì§ˆë¬¸ì´ íŒŒì‹±ë˜ì—ˆìŠµë‹ˆë‹¤${metaSummary}`, listHTML);
            
            // ì¢…í•© ìš”ì•½ íŒŒì‹±
            summaryContent = parseSummary(input);
            
            // í–‰ìš´ ì•„ì´í…œ íŒŒì‹±
            luckPointContent = '';
            luckItemsContent = '';
            parseLuckContent(input);
            
            // ê²°ê³¼ì§€ ìƒì„±
            renderResult();
        }
        
        function parseQuestions(input) {
            const questions = [];
            
            // final-summary ì´ì „ê¹Œì§€ë§Œ íŒŒì‹±í•˜ë„ë¡ input ìë¥´ê¸°
            let questionInput = input;
            const summaryIdx = input.indexOf('class="final-summary"');
            if (summaryIdx !== -1) {
                const divStart = input.lastIndexOf('<div', summaryIdx);
                if (divStart !== -1) {
                    questionInput = input.substring(0, divStart);
                }
            }
            
            // ë°©ë²• 1: HTML div.question-block í˜•ì‹
            const htmlBlockRegex = /<div[^>]*class="question-block"[^>]*>([\s\S]*?)(?=<div[^>]*class="question-block"|<div[^>]*class="final-summary"|$)/gi;
            let htmlMatches = [...questionInput.matchAll(htmlBlockRegex)];
            
            if (htmlMatches.length > 0) {
                htmlMatches.forEach((match, idx) => {
                    const block = match[1];
                    const question = parseHTMLBlock(block, idx + 1);
                    if (question) questions.push(question);
                });
                return questions;
            }
            
            // ë°©ë²• 2: <!-- â˜… ì§ˆë¬¸ N --> ì£¼ì„ í˜•ì‹
            const commentRegex = /<!--\s*â˜…?\s*ì§ˆë¬¸\s*(\d+)\s*-->([\s\S]*?)(?=<!--\s*â˜…?\s*ì§ˆë¬¸\s*\d+\s*-->|$)/gi;
            let commentMatches = [...input.matchAll(commentRegex)];
            
            if (commentMatches.length > 0) {
                commentMatches.forEach((match) => {
                    const num = parseInt(match[1]);
                    const block = match[2];
                    const question = parseHTMLBlock(block, num);
                    if (question) questions.push(question);
                });
                return questions;
            }
            
            // ë°©ë²• 3: ## ì§ˆë¬¸ N: ë§ˆí¬ë‹¤ìš´ í˜•ì‹
            const mdRegex = /##\s*ì§ˆë¬¸\s*(\d+)\s*[:ï¼š]\s*([^\n]+)([\s\S]*?)(?=##\s*ì§ˆë¬¸\s*\d+|$)/gi;
            let mdMatches = [...input.matchAll(mdRegex)];
            
            if (mdMatches.length > 0) {
                mdMatches.forEach((match) => {
                    const num = parseInt(match[1]);
                    const title = match[2].trim();
                    const content = match[3];
                    const question = parseMarkdownBlock(title, content, num);
                    if (question) questions.push(question);
                });
                return questions;
            }
            
            // ë°©ë²• 4: ë‹¨ì¼ ì§ˆë¬¸ (ì„¹ì…˜ë§Œ ìˆëŠ” ê²½ìš°)
            if (input.includes('ëª…ë¦¬ í•´ì„') || input.includes('ì£¼ì—­ í•´ì„') || input.includes('íƒì¼')) {
                const singleQ = parseSingleQuestion(input);
                if (singleQ) questions.push(singleQ);
            }
            
            return questions;
        }
        
        function parseHTMLBlock(block, num) {
            // ì§ˆë¬¸ ì œëª© ì¶”ì¶œ
            let title = '';
            const titleMatch = block.match(/class="question-title"[^>]*>([\s\S]*?)<\/div>/i);
            if (titleMatch) {
                title = titleMatch[1].replace(/<[^>]+>/g, '').replace(/â“\s*ì§ˆë¬¸\s*\d+\s*[:ï¼š]?\s*/i, '').trim();
            }
            
            // ê° ì„¹ì…˜ ì¶”ì¶œ
            const sections = {};
            const sectionRegex = /<div[^>]*class="route-section"[^>]*>([\s\S]*?)(?=<div[^>]*class="route-section"|<div[^>]*class="question-advice"|$)/gi;
            let sectionMatches = [...block.matchAll(sectionRegex)];
            
            sectionMatches.forEach(match => {
                const sectionContent = match[1];
                const typeMatch = sectionContent.match(/class="route-title"[^>]*>([^<]+)/i);
                const contentMatch = sectionContent.match(/class="route-content"[^>]*>([\s\S]*?)(?=<\/div>\s*$|<\/div>\s*<)/i);
                
                if (typeMatch && contentMatch) {
                    const type = typeMatch[1].replace(/[ğŸ’«ğŸ”®ğŸ“…ğŸ ğŸ’‘âœ¨]/g, '').trim();
                    const content = contentMatch[1].trim();
                    
                    if (type.includes('ëª…ë¦¬')) sections.myeongri = content;
                    else if (type.includes('ì£¼ì—­')) sections.juyeok = content;
                    else if (type.includes('íƒì¼')) sections.taegil = content;
                    else if (type.includes('í’ìˆ˜')) sections.pungsu = content;
                    else if (type.includes('ê¶í•©')) sections.gunghap = content;
                }
            });
            
            // í•µì‹¬ ì¡°ì–¸ ì¶”ì¶œ
            const adviceMatch = block.match(/class="question-advice"[^>]*>([\s\S]*?)(?=<\/div>\s*$|<\/div>\s*<\/div>)/i);
            if (adviceMatch) {
                sections.advice = adviceMatch[1].replace(/<[^>]+>/g, '').replace(/ğŸ’¡\s*í•µì‹¬\s*ì¡°ì–¸\s*[:ï¼š]?\s*/i, '').trim();
            }
            
            if (title || Object.keys(sections).length > 0) {
                return { num, title: title || `ì§ˆë¬¸ ${num}`, ...sections };
            }
            return null;
        }
        
        function parseMarkdownBlock(title, content, num) {
            const sections = {};
            
            // ### ì„¹ì…˜ íŒŒì‹±
            const sectionRegex = /###\s*([^\n]+)\n([\s\S]*?)(?=###|$)/gi;
            let matches = [...content.matchAll(sectionRegex)];
            
            matches.forEach(match => {
                const sectionTitle = match[1].trim();
                const sectionContent = match[2].trim();
                
                if (sectionTitle.includes('ëª…ë¦¬')) sections.myeongri = sectionContent;
                else if (sectionTitle.includes('ì£¼ì—­')) sections.juyeok = sectionContent;
                else if (sectionTitle.includes('íƒì¼')) sections.taegil = sectionContent;
                else if (sectionTitle.includes('í’ìˆ˜')) sections.pungsu = sectionContent;
                else if (sectionTitle.includes('ê¶í•©')) sections.gunghap = sectionContent;
                else if (sectionTitle.includes('ì¡°ì–¸') || sectionTitle.includes('í•µì‹¬')) sections.advice = sectionContent;
            });
            
            return { num, title, ...sections };
        }
        
        function parseSingleQuestion(input) {
            const sections = {};
            
            // ì œëª© ì°¾ê¸°
            let title = 'ì¶”ê°€ ì§ˆë¬¸';
            const titleMatch = input.match(/ì§ˆë¬¸\s*\d*\s*[:ï¼š]\s*([^\n<]+)/i);
            if (titleMatch) title = titleMatch[1].trim();
            
            // HTML í˜•ì‹ ì„¹ì…˜
            const htmlSections = input.match(/<div[^>]*class="route-section"[^>]*>[\s\S]*?<\/div>\s*<\/div>/gi);
            if (htmlSections) {
                htmlSections.forEach(section => {
                    const typeMatch = section.match(/route-title[^>]*>([^<]+)/i);
                    const contentMatch = section.match(/route-content[^>]*>([\s\S]*?)<\/div>/i);
                    if (typeMatch && contentMatch) {
                        const type = typeMatch[1];
                        if (type.includes('ëª…ë¦¬')) sections.myeongri = contentMatch[1].trim();
                        else if (type.includes('ì£¼ì—­')) sections.juyeok = contentMatch[1].trim();
                        else if (type.includes('íƒì¼')) sections.taegil = contentMatch[1].trim();
                        else if (type.includes('í’ìˆ˜')) sections.pungsu = contentMatch[1].trim();
                        else if (type.includes('ê¶í•©')) sections.gunghap = contentMatch[1].trim();
                    }
                });
            }
            
            // ì¡°ì–¸
            const adviceMatch = input.match(/í•µì‹¬\s*ì¡°ì–¸[^:ï¼š]*[:ï¼š]\s*([\s\S]*?)(?=<\/div>|$)/i);
            if (adviceMatch) sections.advice = adviceMatch[1].replace(/<[^>]+>/g, '').trim();
            
            if (Object.keys(sections).length > 0) {
                return { num: 1, title, ...sections };
            }
            return null;
        }
        
        function renderResult() {
            const container = document.getElementById('previewContent');
            
            let html = `<div class="result-container">`;
            
            // í—¤ë”
            const birthDisplay = metaInfo.birthFull ? 
                `${metaInfo.year || ''}ë…„ ${metaInfo.month || ''}ì›” ${metaInfo.day || ''}ì¼ ${metaInfo.hour ? metaInfo.hour + 'ì‹œ' : ''} ${metaInfo.minute ? metaInfo.minute + 'ë¶„' : ''} (${metaInfo.calendar || 'ì–‘ë ¥'}, ${metaInfo.gender === 'ì—¬' ? 'ì—¬ì' : 'ë‚¨ì'})` : '';
            
            html += `
                <div class="qa-header">
                    <div class="top-line"></div>
                    <div class="brand">ìš´ ëª… ì„ ë“£ ë‹¤</div>
                    <div class="icon-circle">ğŸ”®</div>
                    <h1>ì¶”ê°€ì§ˆë¬¸</h1>
                    <div class="subtitle">ADDITIONAL Q&A</div>
                    <div class="divider"></div>
                    <div class="user-section">
                        ${metaInfo.name ? `<div class="user-name">${metaInfo.name}ë‹˜</div>` : ''}
                        ${birthDisplay ? `<div class="user-birth">${birthDisplay}</div>` : ''}
                        ${metaInfo.ilju ? `<div class="user-ilju">${metaInfo.ilju}ì¼ì£¼</div>` : ''}
                        <div class="count-badge">ì´ ${parsedQuestions.length}ê°œì˜ ì§ˆë¬¸</div>
                    </div>
                </div>
            `;
            
            // ì¸íŠ¸ë¡œ ì„¤ëª… ë°•ìŠ¤
            html += `
                <div class="intro-box">
                    <div class="intro-icon">ğŸ”®</div>
                    <div class="intro-title">ì¶”ê°€ ì§ˆë¬¸ ë‹µë³€ì„ ì‹œì‘í•©ë‹ˆë‹¤</div>
                    <div class="intro-desc">
                        ${metaInfo.name || 'ê³ ê°'}ë‹˜ì˜ ì‚¬ì£¼ ì›êµ­ì„ ë°”íƒ•ìœ¼ë¡œ,<br>
                        ë³´ë‚´ì£¼ì‹  ì§ˆë¬¸ í•˜ë‚˜í•˜ë‚˜ì— ì •ì„±ê» ë‹µë³€ë“œë ¸ì–´ìš”.<br>
                        <strong>ëª…ë¦¬ í•´ì„, ì£¼ì—­ì˜ ì§€í˜œ, ê·¸ë¦¬ê³  íƒì¼ ì¡°ì–¸</strong>ê¹Œì§€ ë‹´ì•˜ìŠµë‹ˆë‹¤.<br><br>
                        ì²œì²œíˆ ì½ì–´ë³´ì‹œë©°, ë§ˆìŒì— ì™€ë‹¿ëŠ” ë¶€ë¶„ì„ ì°¾ì•„ë³´ì„¸ìš” âœ¨
                    </div>
                </div>
            `;
            
            // ê° ì§ˆë¬¸ ì¹´ë“œ
            parsedQuestions.forEach((q, idx) => {
                html += `
                    <div class="question-card">
                        <div class="question-card-header">
                            <div class="question-number">${q.num || idx + 1}</div>
                            <div class="question-title">${escapeHTML(q.title)}</div>
                        </div>
                        <div class="question-card-body">
                `;
                
                // ëª…ë¦¬ í•´ì„
                if (q.myeongri) {
                    html += `
                        <div class="interpretation-section">
                            <div class="interpretation-header">
                                <div class="interpretation-icon myeongri">ğŸ’«</div>
                                <div class="interpretation-title">ëª…ë¦¬ í•´ì„</div>
                            </div>
                            <div class="interpretation-content">${formatContent(q.myeongri)}</div>
                        </div>
                    `;
                }
                
                // ì£¼ì—­ í•´ì„
                if (q.juyeok) {
                    html += `
                        <div class="interpretation-section">
                            <div class="interpretation-header">
                                <div class="interpretation-icon juyeok">ğŸ”®</div>
                                <div class="interpretation-title">ì£¼ì—­ í•´ì„</div>
                            </div>
                            <div class="interpretation-content">${formatContent(q.juyeok)}</div>
                        </div>
                    `;
                }
                
                // íƒì¼ ì¡°ì–¸
                if (q.taegil) {
                    html += `
                        <div class="interpretation-section">
                            <div class="interpretation-header">
                                <div class="interpretation-icon taegil">ğŸ“…</div>
                                <div class="interpretation-title">íƒì¼ ì¡°ì–¸</div>
                            </div>
                            <div class="interpretation-content">${formatContent(q.taegil)}</div>
                        </div>
                    `;
                }
                
                // í’ìˆ˜ ì¡°ì–¸
                if (q.pungsu) {
                    html += `
                        <div class="interpretation-section">
                            <div class="interpretation-header">
                                <div class="interpretation-icon pungsu">ğŸ </div>
                                <div class="interpretation-title">í’ìˆ˜ ì¡°ì–¸</div>
                            </div>
                            <div class="interpretation-content">${formatContent(q.pungsu)}</div>
                        </div>
                    `;
                }
                
                // ê¶í•© ì‹¬í™” ì•ˆë‚´
                if (q.gunghap) {
                    html += `
                        <div class="interpretation-section">
                            <div class="interpretation-header">
                                <div class="interpretation-icon gunghap">ğŸ’‘</div>
                                <div class="interpretation-title">ê¶í•© ì‹¬í™” ì•ˆë‚´</div>
                            </div>
                            <div class="interpretation-content">${formatContent(q.gunghap)}</div>
                        </div>
                    `;
                }
                
                html += `</div>`; // question-card-body
                
                // í•µì‹¬ ì¡°ì–¸
                if (q.advice) {
                    html += `
                        <div class="advice-box">
                            <div class="advice-box-header">
                                <span class="icon">ğŸ’¡</span>
                                <span class="title">í•µì‹¬ ì¡°ì–¸</span>
                            </div>
                            <div class="advice-box-content">${formatContent(q.advice)}</div>
                        </div>
                    `;
                }
                
                html += `</div>`; // question-card
            });
            
            // ì¢…í•© ìš”ì•½ (ìˆì„ ê²½ìš°ì—ë§Œ)
            if (summaryContent) {
                // HTML êµ¬ì¡° ë‚´ë¶€ì˜ ë§ˆí¬ë‹¤ìš´ë§Œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
                const convertMarkdownInHTML = (html) => {
                    return html
                        // **í…ìŠ¤íŠ¸** â†’ <strong>í…ìŠ¤íŠ¸</strong>
                        .replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>')
                        // *í…ìŠ¤íŠ¸* â†’ <em>í…ìŠ¤íŠ¸</em> (ë‹¨, **ëŠ” ì œì™¸)
                        .replace(/(?<!\*)\*([^*]+)\*(?!\*)/g, '<em>$1</em>');
                };
                
                // ì´ë¯¸ HTML êµ¬ì¡°ê°€ ìˆìœ¼ë©´ ë§ˆí¬ë‹¤ìš´ë§Œ ë³€í™˜í•´ì„œ ì‚¬ìš©
                if (summaryContent.includes('class="final-summary"') || 
                    summaryContent.includes('class="summary') ||
                    summaryContent.includes('class="total')) {
                    html += convertMarkdownInHTML(summaryContent);
                } else {
                    html += `
                        <div class="summary-section">
                            <div class="section-title">
                                <span class="icon">âœ¨</span>
                                <h3>ì „ì²´ ì¢…í•©</h3>
                            </div>
                            <div class="summary-content">${formatContent(summaryContent)}</div>
                        </div>
                    `;
                }
            }
            
            // í–‰ìš´ í‚¤ì›Œë“œ (luck-point)
            if (luckPointContent) {
                html += luckPointContent;
            }
            
            // í–‰ìš´ ì•„ì´í…œ (luck-items)
            if (luckItemsContent) {
                html += luckItemsContent;
            }
            
            // í‘¸í„°
            html += `
                <div class="qa-footer">
                    <div class="divider"></div>
                    <div class="brand">ìš´ëª…ì„ ë“£ë‹¤</div>
                    <div class="message">
                        ë‹¹ì‹ ì˜ ì§ˆë¬¸ì— ìš°ì£¼ê°€ ë‹µí•©ë‹ˆë‹¤ âœ¨<br>
                        ì˜¤ëŠ˜ì˜ í•´ì„ì´ ë„ì›€ì´ ë˜ì…¨ê¸¸ ë°”ëë‹ˆë‹¤.
                    </div>
                    <div class="consultation-box">
                        <div class="consult-title">âœ¨ í˜¹ì‹œ, ì•„ì§ í’€ë¦¬ì§€ ì•Šì€ ë§ˆìŒì´ ìˆìœ¼ì‹ ê°€ìš”?</div>
                        <div class="consult-desc">
                            ê¸€ë¡œ ë‹¤ ë‹´ì§€ ëª»í•œ ì´ì•¼ê¸°,<br>
                            ì§€ê¸ˆ ì´ ìˆœê°„ ê°€ì¥ ë¬´ê±°ìš´ ê³ ë¯¼,<br>
                            ì§ì ‘ ëŒ€í™”ë¡œ í’€ì–´ë³´ê³  ì‹¶ìœ¼ì‹œë‹¤ë©´ â€”<br><br>
                            ì „ë¬¸ ìƒë‹´ì‚¬ì™€ 1:1ë¡œ ì´ì•¼ê¸° ë‚˜ëˆ ë³´ì„¸ìš”.<br>
                            ì¹´ì¹´ì˜¤í†¡ ì±„íŒ…ìœ¼ë¡œ í¸í•˜ê²Œ ì§„í–‰ë©ë‹ˆë‹¤.
                        </div>
                        <div class="consult-cta">
                            <div class="cta-title">ğŸ’¬ ì‹¬í™” ìƒë‹´ ì‹ ì²­</div>
                            <div class="cta-price">
                                <span class="original">ì •ê°€ 100,000ì›</span> â†’ 
                                <span class="discount">ê²°ê³¼ì§€ ê³ ê° ì „ìš© 70,000ì›</span>
                            </div>
                            <div class="cta-action">ì¹´ì¹´ì˜¤ì±„ë„ì—ì„œ "ì‹¬í™”ìƒë‹´ ì‹ ì²­"ì´ë¼ê³  ë‚¨ê²¨ì£¼ì„¸ìš”</div>
                        </div>
                    </div>
                    <a href="http://pf.kakao.com/_LcJxgn/friend" target="_blank" style="text-decoration:none;">
                        <div class="channel-box">
                            <div class="icon">ğŸ’¬</div>
                            <div class="title">ì¹´ì¹´ì˜¤í†¡ ì±„ë„ ì¶”ê°€í•˜ê¸°</div>
                            <div class="desc">
                                ì±„ë„ì„ ì¶”ê°€í•˜ì‹œë©´ <strong>í• ì¸ ì¿ í°</strong> ì†Œì‹ê³¼<br>
                                <strong>ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ì¶œì‹œ</strong> ì‹œ ë°”ë¡œ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤!
                            </div>
                        </div>
                    </a>
                </div>
            `;
            
            html += `</div>`; // result-container
            
            container.innerHTML = html;
        }
        
        function formatContent(text) {
            if (!text) return '';
            
            // ì´ë¯¸ HTML êµ¬ì¡°ê°€ í’ë¶€í•˜ë©´ ìµœì†Œí•œì˜ ì •ë¦¬ë§Œ
            if (text.includes('<div') || text.includes('<p>') || text.includes('<ul>')) {
                return text
                    .replace(/\n{3,}/g, '\n\n')
                    .trim();
            }
            
            return text
                // ë³¼ë“œ (ë§ˆí¬ë‹¤ìš´ â†’ HTML, ê¸°ì¡´ strong ìœ ì§€)
                .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
                // ì´íƒ¤ë¦­ (ë§ˆí¬ë‹¤ìš´ â†’ HTML, ê¸°ì¡´ em ìœ ì§€)
                .replace(/(?<!\*)\*([^*]+)\*(?!\*)/g, '<em>$1</em>')
                // ë¦¬ìŠ¤íŠ¸
                .replace(/^[-â€¢]\s+(.+)$/gm, '<li>$1</li>')
                .replace(/(<li>.*<\/li>\n?)+/g, '<ul>$&</ul>')
                // ì¸ìš©
                .replace(/^>\s*"(.+)"$/gm, '<blockquote>"$1"</blockquote>')
                .replace(/^>\s+(.+)$/gm, '<blockquote>$1</blockquote>')
                // ì¤„ë°”ê¿ˆ (ê¸°ì¡´ br ìœ ì§€í•˜ë©´ì„œ ì¶”ê°€)
                .replace(/\n\n+/g, '</p><p>')
                .replace(/(?<!<br\s*\/?>)\n(?!<)/g, '<br>')
                // ë¹ˆ íƒœê·¸ ì •ë¦¬
                .replace(/<p><\/p>/g, '')
                .replace(/<ul><\/ul>/g, '');
        }
        
        function escapeHTML(str) {
            if (!str) return '';
            return str.replace(/[&<>"']/g, (m) => ({
                '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;'
            })[m]);
        }
        
        function showParseResult(type, message, extra = '') {
            const result = document.getElementById('parseResult');
            const msgEl = document.getElementById('parseMessage');
            const listEl = document.getElementById('questionList');
            
            result.className = `parse-result show ${type}`;
            msgEl.innerHTML = message;
            listEl.innerHTML = extra;
        }
        
        // Google Drive ì—…ë¡œë“œ í•¨ìˆ˜
        async function uploadToNetlify() {
            const content = document.getElementById('previewContent').innerHTML;
            if (content.includes('empty-state')) { alert('ë¨¼ì € ê²°ê³¼ì§€ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.'); return; }
            
            if (!metaInfo.orderCode) {
                alert('ì£¼ë¬¸ì½”ë“œê°€ ì—†ìŠµë‹ˆë‹¤. ê³ ê° ì •ë³´ë¥¼ ë¨¼ì € ë¶ˆëŸ¬ì™€ì£¼ì„¸ìš”.');
                return;
            }
            
            const statusEl = document.getElementById('upload-status');
            statusEl.textContent = 'â³ Google Drive ì—…ë¡œë“œ ì¤‘...';
            
            try {
                // ê²°ê³¼ë¬¼ HTML ìƒì„±
                const styles = document.getElementById('resultStyles').textContent;
                
                // í”Œë¡œíŒ… ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ (data URI ë°©ì‹ - ëª¨ë°”ì¼/Google Drive í˜¸í™˜)
                const downloadBtn = `
                    <button onclick="(function(){
                        var html = document.documentElement.outerHTML;
                        var dataUri = 'data:text/html;charset=utf-8,' + encodeURIComponent('<!DOCTYPE html>'+html);
                        var a = document.createElement('a');
                        a.href = dataUri;
                        a.download = 'ì¶”ê°€ì§ˆë¬¸ê²°ê³¼.html';
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                    })()" style="position:fixed;bottom:20px;left:20px;z-index:9999;width:50px;height:50px;background:linear-gradient(135deg,#d4af82,#b8956a);border-radius:50%;display:flex;align-items:center;justify-content:center;border:none;font-size:22px;box-shadow:0 4px 15px rgba(0,0,0,0.3);cursor:pointer;" title="ê²°ê³¼ì§€ ë‹¤ìš´ë¡œë“œ">ğŸ“¥</button>`;
                
                const fullHTML = `<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${metaInfo.name || 'ê³ ê°'}ë‹˜ì˜ ì¶”ê°€ì§ˆë¬¸ ë‹µë³€ | ìš´ëª…ì„ ë“£ë‹¤</title>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Nanum Myeongjo', serif; background: #f8f6f1; }
        ${styles}
    </style>
</head>
<body>
    ${content}
    ${downloadBtn}
</body>
</html>`;
                
                // Base64 ì¸ì½”ë”©
                const base64Data = btoa(unescape(encodeURIComponent(fullHTML)));
                const fileName = `${metaInfo.orderCode}_ì¶”ê°€ì§ˆë¬¸ê²°ê³¼.html`;
                
                // Google Apps Script API í˜¸ì¶œ (POST ë°©ì‹)
                const webAppUrl = 'https://script.google.com/macros/s/AKfycbzlnTB3d3tO_qvRNKgiLkGgy3EmH_92eYslv4mODGzV7QCiVHYTDLEl4duNlp3PO_kclA/exec';
                
                const response = await fetch(webAppUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'text/plain' },
                    body: JSON.stringify({
                        action: 'uploadResult',
                        orderCode: metaInfo.orderCode,
                        fileName: fileName,
                        fileData: base64Data,
                        resultType: 'additional'
                    })
                });
                
                const result = await response.json();
                
                if (!result.success) {
                    throw new Error(result.error || 'ì—…ë¡œë“œ ì‹¤íŒ¨');
                }
                
                const fileUrl = result.fileUrl;
                
                // í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹œë„ (ì‹¤íŒ¨í•´ë„ ë§í¬ëŠ” í‘œì‹œ)
                let copied = false;
                try {
                    await navigator.clipboard.writeText(fileUrl);
                    copied = true;
                } catch (clipErr) {
                    console.log('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨ (ëª¨ë°”ì¼ ì œí•œ):', clipErr);
                }
                
                statusEl.innerHTML = 'âœ… <a href="' + fileUrl + '" target="_blank" style="color:#00ad9f;">' + fileUrl + '</a>' + (copied ? ' (ë³µì‚¬ë¨!)' : '');
                alert('ğŸ‰ ë§í¬ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!\n\n' + fileUrl + (copied ? '\n\ní´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆì–´ìš”.' : '\n\nìœ„ ë§í¬ë¥¼ ê¸¸ê²Œ ëˆŒëŸ¬ ë³µì‚¬í•˜ì„¸ìš”.'));
                
            } catch (error) {
                console.error(error);
                statusEl.textContent = 'âŒ ì—…ë¡œë“œ ì‹¤íŒ¨';
                alert('ì—…ë¡œë“œ ì‹¤íŒ¨: ' + error.message);
            }
        }
        
        // â˜… Google Sheetsì— ì¶”ê°€ì§ˆë¬¸ ê²°ê³¼ URL ì €ì¥ (uploadResultì—ì„œ ìë™ ì €ì¥ë˜ë¯€ë¡œ ë°±ì—…ìš©)
        function saveAdditionalResultUrl(orderCode, url) {
            const webAppUrl = 'https://script.google.com/macros/s/AKfycbzlnTB3d3tO_qvRNKgiLkGgy3EmH_92eYslv4mODGzV7QCiVHYTDLEl4duNlp3PO_kclA/exec';
            const apiUrl = `${webAppUrl}?action=saveResultUrl&orderCode=${encodeURIComponent(orderCode)}&resultType=additional&url=${encodeURIComponent(url)}`;
            
            // form POST ë°©ì‹ (CORS ìš°íšŒ)
            const iframeName = 'saveFrame_' + Date.now();
            const iframe = document.createElement('iframe');
            iframe.name = iframeName;
            iframe.style.display = 'none';
            document.body.appendChild(iframe);
            
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = webAppUrl;
            form.target = iframeName;
            form.style.display = 'none';
            
            const params = {
                action: 'saveResultUrl',
                orderCode: orderCode,
                resultType: 'additional',
                url: url
            };
            
            for (const key in params) {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = key;
                input.value = params[key];
                form.appendChild(input);
            }
            
            document.body.appendChild(form);
            form.submit();
            
            console.log('âœ… ì¶”ê°€ì§ˆë¬¸ ê²°ê³¼ URL ìë™ ì €ì¥:', orderCode);
            
            // ì •ë¦¬ (3ì´ˆ í›„)
            setTimeout(() => {
                if (form.parentNode) form.parentNode.removeChild(form);
                if (iframe.parentNode) iframe.parentNode.removeChild(iframe);
            }, 3000);
        }
        
        function downloadHTML() {
            const content = document.getElementById('previewContent').innerHTML;
            if (content.includes('empty-state')) {
                alert('ë¨¼ì € ê²°ê³¼ì§€ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const styles = document.getElementById('resultStyles').textContent;
            const fullHTML = `<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${metaInfo.name || 'ê³ ê°'}ë‹˜ì˜ ì¶”ê°€ì§ˆë¬¸ ë‹µë³€ | ìš´ëª…ì„ ë“£ë‹¤</title>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Nanum Myeongjo', serif; background: #f8f6f1; }
        ${styles}
    </style>
</head>
<body>
    ${content}
</body>
</html>`;
            
            const dataUri = 'data:text/html;charset=utf-8,' + encodeURIComponent(fullHTML);
            const a = document.createElement('a');
            a.href = dataUri;
            a.download = `${metaInfo.name || 'ê³ ê°'}_ì¶”ê°€ì§ˆë¬¸ë‹µë³€_${metaInfo.year || ''}${metaInfo.month || ''}${metaInfo.day || ''}.html`;
            a.click();
        }
        
        function clearInput() {
            document.getElementById('claudeInput').value = '';
            document.getElementById('parseResult').className = 'parse-result';
            document.getElementById('previewContent').innerHTML = `
                <div class="empty-state">
                    <div class="icon">ğŸ”®</div>
                    <p>Claude ì¶”ê°€ì§ˆë¬¸ ë‹µë³€ì„ ë¶™ì—¬ë„£ìœ¼ë©´<br>ê²°ê³¼ì§€ê°€ ìƒì„±ë©ë‹ˆë‹¤</p>
                </div>
            `;
            parsedQuestions = [];
            metaInfo = {};
            summaryContent = '';
            luckPointContent = '';
            luckItemsContent = '';
        }
    </script>
<!-- í”Œë¡œíŒ… ê´€ë¦¬ì ë²„íŠ¼ -->
<a href="index.html" style="position:fixed; bottom:20px; right:20px; z-index:9999; width:50px; height:50px; background:linear-gradient(135deg,#d4af82,#b8956a); border-radius:50%; display:flex; align-items:center; justify-content:center; text-decoration:none; font-size:24px; box-shadow:0 4px 15px rgba(0,0,0,0.3);">ğŸ </a>
</body>
</html>
