# Claude Code 규칙

## 폴더 구조 규칙 (중요!)

### 프로젝트별 폴더 구조
```
클로드코드_맥/
├── 사주/              # 사주 프로젝트 관련 모든 파일
├── 유튜브/            # 유튜브 생성기 관련 모든 파일
├── 동양+서양/         # 동양+서양 프로젝트 (별도)
├── .claude/           # 클로드 설정 (전역)
├── .git/              # Git (전역)
└── .vscode/           # VSCode 설정 (전역)
```

### 새 파일 생성 시 규칙
1. **사주 관련** → `사주/` 폴더 안에 생성
   - 앱/웹 파일 → `사주/앱/`
   - 가이드/문서 → `사주/가이드/`
   - 테스트 파일 → `사주/테스트/`
   - 배포 관련 → `사주/배포/`
   - 백업 파일 → `사주/백업/`

2. **유튜브 관련** → `유튜브/` 폴더 안에 생성
   - 스크립트 → `유튜브/`
   - 결과물 → `유튜브/결과물/`

3. **새 프로젝트** → 루트에 새 폴더 생성 후 그 안에서 작업

### 파일명 규칙
- 한글 사용 OK (직관적으로)
- 공백 대신 언더스코어(_) 또는 하이픈(-) 사용
- 날짜 포함 시: `YYYYMMDD` 형식 (예: `20260115`)

### 절대 루트에 두면 안 되는 것
- 특정 프로젝트 전용 파일 (package.json, README.md 등)
- 프로젝트별 설정 파일 (.netlify 등)
- 결과물/출력 파일

---

## .claude 폴더 설명

### 슬래시 명령어 (commands/)
| 명령어 | 파일 | 기능 |
|--------|------|------|
| `/배포` | 배포.md | git 커밋 + 푸시 + Netlify 배포 |
| `/서버` | 서버.md | 개발서버 백그라운드 실행 |

### 훅 (hooks/) - 자동 실행 스크립트
| 파일 | 한글 설명 | 언제 실행? |
|------|----------|-----------|
| session-start.sh | 세션시작_상태표시 | 클로드 시작할 때 |
| pre-commit-check.sh | 커밋전_검사 | git 커밋 전 |
| pre-deploy-check.sh | 배포전_검사 | 배포 명령 전 |
| protect-files.sh | 중요파일_보호 | 파일 수정 시 |

※ 훅 파일명은 시스템에서 인식해서 변경 불가

---

## 코딩 작업 시 규칙

### 1. 요청한 것만 수정하기
- 사용자가 요청한 부분만 정확히 수정한다
- 주변 코드나 관련 코드를 임의로 수정하지 않는다

### 2. 추가 수정이 필요해 보일 때
작업 중 다음과 같은 상황이 발생하면 **먼저 사용자에게 물어본다**:

- 수정 중 다른 버그나 문제를 발견했을 때
  - 예: "이 부분에서 다른 문제도 발견했는데, 같이 수정할까요?"

- 더 나은 방식이 있다고 판단될 때
  - 예: "이 방식보다 더 좋은 방법이 있는데, 변경해도 될까요?"

- 비슷한 패턴이 여러 곳에 있어서 일괄 수정이 필요해 보일 때
  - 예: "같은 패턴이 3군데 더 있는데, 모두 수정할까요?"

- 리팩토링이나 코드 개선이 필요해 보일 때
  - 예: "이 코드를 리팩토링하면 더 깔끔해질 것 같은데, 진행할까요?"

### 3. 질문 없이 수정해도 되는 경우
- 요청한 수정을 완료하기 위해 반드시 필요한 연관 수정
- 명백한 오타나 문법 오류 (수정 범위 내에서)
- import문 추가 등 코드가 동작하기 위해 필수적인 변경

### 4. 커밋 메시지
- 실제 변경한 내용만 커밋 메시지에 포함
- 수정하지 않은 내용을 커밋 메시지에 넣지 않음

### 5. 작업 완료 시 커밋 및 배포
작업이 마무리되면 잊지 않고 다음을 수행한다:
- git 커밋: 변경사항을 커밋 및 푸시
- 사이트 배포: Netlify 등에 업로드
- 사용자에게 완료 여부 확인

### 6. 입력폼 수정 시 배포 규칙 (중요!)
입력폼(1_input.html, input-form-deploy/index.html) 수정 시 **반드시 3곳 모두 배포**:
1. **관리자페이지**: `npx netlify deploy --prod` (saju-admin.netlify.app)
2. **입력폼**: `cd input-form-deploy && npx netlify deploy --prod` (lucky-cactus-b5f9e6.netlify.app)
3. **GitHub**: `git add -A && git commit && git push origin main`

### 7. 최신 문서 참조
코드 작성 시 라이브러리 최신 문법이 필요하면 Context 7을 사용해서 최신 공식 문서를 참고한다.

### 8. README.md 업데이트 규칙
시스템 구조가 변경되면 README.md도 함께 업데이트한다:
- 새 기능/파일 추가 시 → 해당 섹션에 설명 추가
- 파일 구조 변경 시 → 폴더 구조 섹션 업데이트
- 배포 방식 변경 시 → 배포 규칙 섹션 업데이트
- 완료된 계획은 `[x]`로 체크, 새 계획은 `[ ]`로 추가
